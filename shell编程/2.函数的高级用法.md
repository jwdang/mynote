
<!-- TOC -->

- [函数格式](#函数格式)
- [调用：](#调用)
- [返回值](#返回值)
- [全局变量](#全局变量)
- [局部变量](#局部变量)
- [函数库](#函数库)
- [经验](#经验)

<!-- /TOC -->


# 函数格式
```Bash
# 第一种格式
name()
{
    command1
    command2
    .....
    commandn
}
# 第二种格式
function name
{
    command1
    command2
    .....
    commandn
}


```

# 调用：
直接使用函数名调用，可以将其想象成shell中的一条命令
函数内部可以直接使用参数$1, $2, ... $n
调用函数：function_name $1 $2

eg1:
写一个监控nginx的脚本：如果nginx服务宕掉，则该脚本可以检测到并将该进程启动；如果正常运行，则不做任何处理。

eg2:
写一个脚本，该脚本可以实现计算器的功能，可以进行+-*/四种计算。
例如：sh calc.sh 30 + 40

# 返回值
	- return
		○ 使用return返回值，只能返回1-255的整数
		○ 函数使用return返回值，通常只是用来供其他地方调用获取状态，因此通常仅返回0或1； 0表示成功，1表示失败。
	- echo
		○ 使用echo可以返回任何字符串结果
		○ 通常用于返回数据，比如一个字符串值或者列表值

sh -x nginx.sh 打印执行顺序

# 全局变量
	- 不做特殊声明，shell中变量都是全局变量
	- Tips：大型脚本程序中函数中慎用全局变量
# 局部变量
	- 定义变量时，使用local关键字
	- 函数内和外若存在同名变量，则函数内部变量覆盖外部变量
# 函数库
	- 经常使用的重复代码封装成函数文件
	- 一般不直接执行，而是由其他脚本调用
eg：
定义一个函数库，该函数库实现以下几个函数：
	1. 加法函数add
		add 12 33
	2. 减法函数reduce
	3. 乘法函数multiple
	4. 除法函数divide
	5. 打印系统运行情况的函数sys_load，该函数可以显示内存运行情况，磁盘使用情况



使用. 库文件名 引入库

# 经验
	- 库文件名的后缀是任意的，但一般使用.lib结尾
	- 库文件通常没有可执行选项
	- 库文件无需和脚本在同级目录，只需在脚本中引用时指定
第一行一般使用#!/bin/echo，输出警告信息，避免用户执行
